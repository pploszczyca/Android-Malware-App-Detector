from dataclasses import dataclass

import pandas as pd
from pandas import DataFrame

from data_preprocessing.OnePermissionPerFeatureStrategy import OnePermissionPerFeatureStrategy
from data_preprocessing.PreprocessingStrategy import PreprocessingStrategy
from data_preprocessing.data_preprocessor_builder import DataPreprocessorBuilder
from data_preprocessing.data_splitter_saver import DataSplitterSaver


@dataclass
class Data:
    data_name: str
    file_path: str
    result_col_name: str


def main():
    datasets_folder_path = '../datasets/'
    data: list[Data] = [
        Data(data_name='Naticusdroid', file_path=datasets_folder_path + 'naticusdroid+android+permissions+dataset.csv',
             result_col_name='Label'),
        Data(data_name='Android_Malware_Benign', result_col_name='Label',
             file_path=datasets_folder_path + 'Android_Malware_Benign.csv')
    ]

    strategy: PreprocessingStrategy = OnePermissionPerFeatureStrategy()
    results = strategy.preprocess(data)
    DataSplitterSaver(data_list=results).process_and_save(folder_path='../processed_data/')


if __name__ == '__main__':
    main()
